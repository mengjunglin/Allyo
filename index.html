<html>
  <head>
    <title>Home</title>
  </head>
  <body>
    <input type=text id="userInput" onkeyup="textChange()">
    <br>
    <iframe id="previewFrame" src="//www.rpi.edu" width = "500px" height = "500px">
    </iframe>
    <!--Many sites cannot be displayed due to "'X-Frame-Options' is set to 'SAMEORIGIN'"-->
  </body>
  <script>
  function textChange()
  {
    var input = document.getElementById("userInput").value;
    showPreview(findUrl(input));
  }

  function findUrl(text)
  {
    //pattern from URI.js [https://github.com/medialize/URI.js]
    var pattern = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig;
    var result = text.match(pattern);
    return result;
  }

  function showPreview(url)
  {
    console.log("url>>" + url);
    var preview = document.getElementById("previewFrame");
    preview.src = url==null ? "" : modifyUrl(url);
  }

  function modifyUrl(originalUrl)
  {
    var oUrl = String(originalUrl);
    if(oUrl.indexOf("http") == 0) return oUrl;
    else return "//"+oUrl;
  }
  </script>
</html>
